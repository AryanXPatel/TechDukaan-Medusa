# TechDukaan Production Environment Template
# Copy this file to .env.production and fill in your actual values
# NEVER commit .env.production to GitHub!

# How to generate secrets for .env.production (run these commands and copy the output):
# openssl rand -base64 32    # For JWT_SECRET
# openssl rand -base64 16    # For COOKIE_SECRET and SESSION_SECRET (use same value)
# openssl rand -hex 16       # For MEILI_MASTER_KEY

# Core Configuration
NODE_ENV=production
PORT=9000

# Database (Azure PostgreSQL Flexible Server)
# Format: postgres://username:password@server:5432/database?ssl=true
DATABASE_URL=postgres://USERNAME:PASSWORD@psql-techdukaan-prod.postgres.database.azure.com:5432/postgres?ssl=true

# Redis (Docker container name)
REDIS_URL=redis://redis:6379

# Security Secrets (IMPORTANT: SESSION_SECRET and COOKIE_SECRET must be identical!)
# Generate with: openssl rand -base64 32
JWT_SECRET=GENERATE_RANDOM_32_CHAR_STRING
# Generate with: openssl rand -base64 16 (use same value for both below)
COOKIE_SECRET=GENERATE_RANDOM_16_CHAR_STRING
SESSION_SECRET=GENERATE_RANDOM_16_CHAR_STRING

# CORS Configuration for Production
STORE_CORS=https://techdukaan.tech,https://www.techdukaan.tech,http://localhost:3000
ADMIN_CORS=*
AUTH_CORS=https://techdukaan.tech,https://www.techdukaan.tech,http://localhost:3000

# CORS Credentials for Session Cookies
CORS_CREDENTIALS=true

# Azure Blob Storage
STORAGE_PROVIDER=azure
AZURE_STORAGE_ACCOUNT_NAME=sttechdukaanprod
AZURE_STORAGE_ACCOUNT_KEY=YOUR_AZURE_STORAGE_KEY_FROM_PORTAL
AZURE_STORAGE_CONTAINER_NAME=medusa-uploads

# MeiliSearch (Docker container name)
MEILI_HTTP_ADDR=meilisearch:7700
MEILI_MASTER_KEY=GENERATE_RANDOM_16_CHAR_STRING

# Worker Mode Configuration
WORKER_MODE=shared

# Admin User Credentials
ADMIN_EMAIL=admin@techdukkan.com
ADMIN_PASSWORD=GENERATE_SECURE_PASSWORD

# External Backend URL for Admin (replace YOUR_VM_IP with actual IP)
MEDUSA_ADMIN_BACKEND_URL=http://YOUR_VM_IP:9000
